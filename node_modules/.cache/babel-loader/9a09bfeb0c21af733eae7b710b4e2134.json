{"ast":null,"code":"var _jsxFileName = \"D:\\\\web\\\\textin-app\\\\src\\\\components\\\\dp.js\";\nimport React, { Component } from 'react';\nimport axios from 'axios';\nimport { UserContext } from '../contexts/userContext';\nimport { storage } from \"../firebase/index\";\n\nrequire(\"dotenv\").config();\n\nclass Dp extends Component {\n  constructor(props) {\n    super(props);\n\n    this.upload = file => {\n      const {\n        username,\n        id\n      } = this.context;\n      const uploadTask = storage.ref(`dp/${username + file.name}`).put(file);\n      uploadTask.on(\"state_changed\", snapshot => {}, error => {\n        console.log(error);\n      }, () => {\n        storage.ref('dp').child(username + file.name).getDownloadURL().then(url => {\n          axios.post(process.env.REACT_APP_BACKEND_URL + `api/dp/${id}`, {\n            name: username,\n            path: url\n          }).then(res => {\n            this.setState({\n              path: url\n            });\n            document.querySelector(\".dp-setting\").style.pointerEvents = \"auto\";\n            this.setState({\n              dploading: false\n            });\n          }).catch(err => console.log(err));\n        });\n      });\n    };\n\n    this.handleChange = e => {\n      if (e.target.type === 'file') {\n        if (e.target.files.length === 0) {\n          return null;\n        }\n\n        const file = e.target.files[0];\n        let ls = file.name.split('.');\n        let extension = ls[ls.length - 1];\n\n        if (extension === 'png' || extension === 'jpg' || extension === 'jpeg' || extension === 'jpe' || extension === 'jif' || extension === 'jfif' || extension === 'jfi' || extension === '.webp') {\n          this.setState({\n            dploading: true\n          });\n          document.querySelector(\".dp-setting\").style.pointerEvents = \"none\";\n          this.upload(file);\n        } else {\n          alert(\"choose an image file\");\n        }\n      } else {\n        const status = e.target.value;\n        this.setState({\n          status: status\n        });\n      }\n    };\n\n    this.handleClick = e => {\n      e.preventDefault();\n      const {\n        username,\n        id\n      } = this.context;\n      axios.post(process.env.REACT_APP_BACKEND_URL + `api/status/${id}`, {\n        status: this.state.status,\n        username: username\n      }).then(res => {\n        if (res.data.status === \"success\") {\n          this.setState({\n            updateUser: true\n          });\n          this.props.history.push(\"/home\");\n        } else {\n          alert(\"unknown  error\");\n        }\n      });\n    };\n\n    this.state = {\n      dploading: false,\n      fileInfo: null,\n      loaded: '',\n      path: 'https://firebasestorage.googleapis.com/v0/b/texting--dp.appspot.com/o/dp%2Fnodp.png?alt=media&token=533360ed-39f7-4938-b56d-1bd945818cbe',\n      status: ''\n    };\n    this.handleClick = this.handleClick.bind(this);\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  render() {\n    const {\n      username\n    } = this.context;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"FormContent\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"heading-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 19\n      }\n    }, \"Hi \", username, \" ,\", /*#__PURE__*/React.createElement(\"div\", {\n      className: \"setting-profile-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 44\n      }\n    }, \"set your profile\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"button-signup skip-button\",\n      onClick: () => {\n        this.setState({\n          updateUser: true\n        });\n        window.location = '/home';\n      },\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 31\n      }\n    }, \"Skip\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"inputFrom\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 18\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 144,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dp-setting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 21\n      }\n    }, this.state.dploading ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 43\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"loadingdp\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 63\n      }\n    }, /*#__PURE__*/React.createElement(\"span\", {\n      id: \"outerCircle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 84\n      }\n    }))) : /*#__PURE__*/React.createElement(\"img\", {\n      className: \"dp\",\n      src: this.state.path,\n      alt: \"#\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 128\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      for: \"file-upload\",\n      className: \"dp-input\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 23\n      }\n    }, \"change profile\"), /*#__PURE__*/React.createElement(\"input\", {\n      id: \"file-upload\",\n      type: \"file\",\n      onChange: this.handleChange,\n      placeholder: \"\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 150,\n        columnNumber: 23\n      }\n    })), /*#__PURE__*/React.createElement(\"input\", {\n      type: \"text\",\n      className: \"status-input\",\n      maxlength: \"30\",\n      name: \"status\",\n      value: this.state.status,\n      onChange: this.handleChange,\n      placeholder: \"Status\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 21\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      class: \"btn btn-light\",\n      name: \"status\",\n      onClick: this.handleClick,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 21\n      }\n    }, \"Update\"))));\n  }\n\n}\n\nDp.contextType = UserContext;\nexport default Dp;","map":{"version":3,"sources":["D:/web/textin-app/src/components/dp.js"],"names":["React","Component","axios","UserContext","storage","require","config","Dp","constructor","props","upload","file","username","id","context","uploadTask","ref","name","put","on","snapshot","error","console","log","child","getDownloadURL","then","url","post","process","env","REACT_APP_BACKEND_URL","path","res","setState","document","querySelector","style","pointerEvents","dploading","catch","err","handleChange","e","target","type","files","length","ls","split","extension","alert","status","value","handleClick","preventDefault","state","data","updateUser","history","push","fileInfo","loaded","bind","render","window","location","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios';\nimport  { UserContext } from '../contexts/userContext'\nimport {storage} from \"../firebase/index\"\nrequire(\"dotenv\").config();\nclass Dp extends Component {\n    static contextType = UserContext\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            dploading:false,\n            fileInfo: null,\n            loaded: '',\n            path: 'https://firebasestorage.googleapis.com/v0/b/texting--dp.appspot.com/o/dp%2Fnodp.png?alt=media&token=533360ed-39f7-4938-b56d-1bd945818cbe',\n         \n            status: '',\n           \n\n        }\n        this.handleClick = this.handleClick.bind(this);\n        this.handleChange = this.handleChange.bind(this);\n        \n    }\n \n    upload = (file) =>\n    { \n        const {username,id} = this.context\n    \n             const uploadTask = storage.ref(`dp/${username+file.name}`).put(file);\n             \n             uploadTask.on(\n                 \"state_changed\",\n                 snapshot => {},\n                 error =>\n                 {\n                     console.log(error)\n                 },\n               () =>\n                 {\n                     storage.ref('dp')\n                     .child(username+file.name)\n                     .getDownloadURL()\n                     .then(url =>\n                         {\n                             \n \n                             axios.post( process.env.REACT_APP_BACKEND_URL+`api/dp/${id}`,{name:username,path:url})\n                                 .then((res) => {\n                                   \n                                 this.setState({path:url})\n\n                                document.querySelector(\".dp-setting\").style.pointerEvents=\"auto\"\n                               \n                                this.setState({dploading:false})\n                                  \n                                 })\n                                 .catch((err) => console.log(err));\n \n \n \n \n \n \n \n \n                         })\n \n                 }\n             )\n \n \n    }\n\n    handleChange = (e) => {\n        if (e.target.type === 'file') {\n            if(e.target.files.length===0)\n            { \n                return null\n            }\n\n            const file = e.target.files[0];\n            let ls = file.name.split('.');\n            let extension = ls[ls.length-1]\n           \n            if(extension==='png' || extension==='jpg' || extension==='jpeg' || extension==='jpe' || extension==='jif' || extension==='jfif' || extension==='jfi' || extension==='.webp'){ \n\n                \n             this.setState({dploading:true})\n             document.querySelector(\".dp-setting\").style.pointerEvents = \"none\";\n                this.upload(file)\n                  \n\n            }\n            else{\n                alert(\"choose an image file\")\n            }\n            \n        }\n        else\n       {\n            const status = e.target.value;\n            this.setState({status:status})\n           \n        }\n\n\n\n    }\n  \n\n    handleClick = (e) => {\n        e.preventDefault();\n        const {username,id} = this.context\n        axios.post( process.env.REACT_APP_BACKEND_URL+`api/status/${id}`,{status:this.state.status,username:username}).then(res =>{\n            if(res.data.status===\"success\")\n            {       this.setState({updateUser:true})\n            this.props.history.push(\"/home\")\n            }\n            \n            else\n            {\n                alert(\"unknown  error\");\n            }\n        })\n\n        \n\n    }\n\n\n    render() {\n        const {username} = this.context\n        return (\n            <div className=\"FormContent\">\n                \n                  <div className=\"heading-form\" >\n                            Hi {username} ,<div className=\"setting-profile-text\">set your profile</div>\n                              </div>\n                              <div className=\"button-signup skip-button\" onClick={()=>{ this.setState({updateUser:true});window.location='/home'}}>Skip</div>\n                 <div className=\"inputFrom\">\n                  \n                  \n                <form  onSubmit={this.handleClick}>\n                    <div className=\"dp-setting\">\n                    {this.state.dploading?<div className=\"dp\"><span id='loadingdp'><span id='outerCircle'></span></span></div>:<img className=\"dp\"  src={this.state.path} alt=\"#\" />} \n                      <label for=\"file-upload\"   className=\"dp-input\">\n                      change profile\n                   </label>\n                      <input\n                        id=\"file-upload\"\n                        type=\"file\" onChange={this.handleChange}\n                        placeholder=\"\"\n                        />\n                    </div>\n                   \n\n                    \n              \n                    \n                    <input type='text' \n                    className=\"status-input\" maxlength=\"30\" name=\"status\" value={this.state.status} onChange={this.handleChange} placeholder='Status' />\n                  \n                    <button type=\"submit\" class=\"btn btn-light\" name='status' onClick={this.handleClick}>Update</button>\n                    \n                </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Dp;\n"]},"metadata":{},"sourceType":"module"}