{"ast":null,"code":"var _jsxFileName = \"D:\\\\web\\\\textin-app\\\\src\\\\components\\\\chatComponents\\\\chatBrief.js\";\nimport React, { Component } from 'react';\nimport { UserContext } from '../../contexts/userContext';\n\nclass ChatBrief extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {};\n\n    this.formatAMPM = lastSeen => {\n      // var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n      var days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n      var temp_now = new Date(); //  let month= months[lastSeen.getMonth()];\n\n      let day = lastSeen.getDate();\n      let weekDay = days[lastSeen.getDay()];\n      let year = lastSeen.getFullYear().toString().slice(-2);\n      let month = lastSeen.getMonth() + 1;\n\n      if (temp_now.getFullYear() !== lastSeen.getFullYear() || temp_now.getMonth() !== lastSeen.getMonth()) {\n        return day + \"/\" + month + \"/\" + year;\n      }\n\n      if (temp_now.getMonth() === lastSeen.getMonth()) {\n        if (temp_now.getDate() - day === 0) {\n          var hours = lastSeen.getHours();\n          var minutes = lastSeen.getMinutes();\n          var ampm = hours >= 12 ? 'PM' : 'AM';\n          hours = hours % 12;\n          hours = hours ? hours : 12; // the hour '0' should be '12'\n\n          minutes = minutes < 10 ? '0' + minutes : minutes;\n          var strTime = hours + ':' + minutes + ' ' + ampm;\n          return strTime;\n        } else if (temp_now.getDate() - day === 1) {\n          return \"Yesterday\";\n        } else if (temp_now.getDate() - day > 7) {\n          return weekDay;\n        } else {\n          return day + \"/\" + month + \"/\" + year;\n        }\n      }\n    };\n\n    this.unseenMsg = newmsg => {\n      var cnt = 0;\n      newmsg.messages.map(m => {\n        if (!m.seen && m.senderId === newmsg.Id) {\n          cnt = cnt + 1;\n        }\n\n        return 0;\n      });\n\n      if (cnt) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          className: \"unseen-msg\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 14\n          }\n        }, /*#__PURE__*/React.createElement(\"p\", {\n          className: \"center-cnt\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 42\n          }\n        }, cnt));\n      }\n    };\n\n    this.unseenMsgForRoom = newmsg => {\n      var cnt = 0;\n      newmsg.messages.map(m => {\n        if (!m.seen && m.senderId === newmsg.Id) {\n          cnt = cnt + 1;\n        }\n\n        return 0;\n      });\n      return cnt;\n    };\n\n    this.openChat = user => {\n      const {\n        currentUserUpdate,\n        messages\n      } = this.context;\n      let em = parseFloat(getComputedStyle(document.querySelector('body'))['font-size']);\n      let width = window.innerWidth / em;\n      let height = window.innerHeight / em;\n\n      if (width < 60 || height < 41) {\n        document.querySelector(\".middleHome\").style.display = \"flex\";\n        document.querySelector(\".leftHome\").style.display = \"none\";\n      }\n\n      if (width > 60 && width < 90) {\n        const middle = document.querySelector(\".middleHome\").style.display;\n\n        if (middle === \"none\") {\n          document.querySelector(\".middleHome\").style.display = \"flex\";\n          document.querySelector(\".rightHome\").style.display = 'none';\n        }\n      }\n\n      for (let i = 0; i < messages.length; i++) {\n        if (user.id === messages[i].Id) {\n          let chat = messages[i];\n          currentUserUpdate({\n            _id: chat.Id,\n            username: chat.username,\n            path: chat.path,\n            isOnline: chat.isOnline,\n            status: chat.status,\n            lastSeen: chat.lastSeen\n          });\n          break;\n        }\n      }\n    };\n\n    this.status = msg => {\n      if (msg.seen) return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"status-brief\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 136,\n          columnNumber: 47\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"check\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 137,\n          columnNumber: 38\n        }\n      }, msg.msgBody), \" \");else if (msg.delivered) return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"status-brief\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 15\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"check-sent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 45\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"check-sent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 7\n        }\n      }), \" \", /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 42\n        }\n      }, msg.msgBody));else if (msg.sent) return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"status-brief\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 14\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"check-sent\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 44\n        }\n      }), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 78\n        }\n      }, msg.msgBody));else return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"status-brief\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 20\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        id: \"loading5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 145,\n          columnNumber: 12\n        }\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        id: \"outerCircle\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 16\n        }\n      })), /*#__PURE__*/React.createElement(\"p\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 149,\n          columnNumber: 12\n        }\n      }, msg.msgBody));\n    };\n\n    this.lastMessage = newmsg => {\n      if (newmsg.Id === newmsg.messages[newmsg.messages.length - 1].senderId) return newmsg.messages[newmsg.messages.length - 1].msgBody;else return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 10\n        }\n      }, this.status(newmsg.messages[newmsg.messages.length - 1]), \" \");\n    };\n  }\n\n  render() {\n    const {\n      updateSearch,\n      updatecnt,\n      onlineBottomUpdate,\n      updatecntifup\n    } = this.context;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"left-c \",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"ul\", {\n      className: \"img-ul\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }\n    }, this.props.messages.map(newmsg => {\n      return /*#__PURE__*/React.createElement(\"li\", {\n        className: \"img-li \",\n        key: newmsg.Id,\n        onClick: e => {\n          this.openChat({\n            id: newmsg.Id\n          });\n          updatecnt(this.unseenMsgForRoom(newmsg));\n          onlineBottomUpdate(true);\n          updatecntifup();\n          updateSearch();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 5\n        }\n      }, newmsg.isOnline ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-chat\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 24\n        }\n      }, \" \", /*#__PURE__*/React.createElement(\"img\", {\n        className: \"left-img\",\n        alt: \"#\",\n        src: newmsg.path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 51\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"online-color\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 107\n        }\n      })) : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-chat\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 150\n        }\n      }, /*#__PURE__*/React.createElement(\"img\", {\n        className: \"left-img\",\n        alt: \"#\",\n        src: newmsg.path,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 182,\n          columnNumber: 176\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-div \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 184,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"h6\", {\n        className: \"img-h\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 185,\n          columnNumber: 1\n        }\n      }, newmsg.username, \" \"), newmsg.isTyping ? /*#__PURE__*/React.createElement(\"div\", {\n        className: \"typing\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 20\n        }\n      }, \"Typing ....\") : /*#__PURE__*/React.createElement(\"div\", {\n        className: \"img-p\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 62\n        }\n      }, \"  \", this.lastMessage(newmsg))), /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 5\n        }\n      }, newmsg.isTyping ? /*#__PURE__*/React.createElement(\"span\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 22\n        }\n      }) : /*#__PURE__*/React.createElement(\"span\", {\n        className: \"time\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 190,\n          columnNumber: 36\n        }\n      }, this.formatAMPM(new Date(newmsg.messages[newmsg.messages.length - 1].sentTime))), this.unseenMsg(newmsg)));\n    })), this.props.messages.length ? /*#__PURE__*/React.createElement(\"div\", {\n      className: \"dot-end\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 33\n      }\n    }) : /*#__PURE__*/React.createElement(\"span\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 65\n      }\n    }));\n  }\n\n}\n\nChatBrief.contextType = UserContext;\nexport default ChatBrief;","map":{"version":3,"sources":["D:/web/textin-app/src/components/chatComponents/chatBrief.js"],"names":["React","Component","UserContext","ChatBrief","state","formatAMPM","lastSeen","days","temp_now","Date","day","getDate","weekDay","getDay","year","getFullYear","toString","slice","month","getMonth","hours","getHours","minutes","getMinutes","ampm","strTime","unseenMsg","newmsg","cnt","messages","map","m","seen","senderId","Id","unseenMsgForRoom","openChat","user","currentUserUpdate","context","em","parseFloat","getComputedStyle","document","querySelector","width","window","innerWidth","height","innerHeight","style","display","middle","i","length","id","chat","_id","username","path","isOnline","status","msg","msgBody","delivered","sent","lastMessage","render","updateSearch","updatecnt","onlineBottomUpdate","updatecntifup","props","e","isTyping","sentTime","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport { UserContext } from '../../contexts/userContext';\n\n\n\nclass ChatBrief extends Component {\n    static contextType = UserContext;\n \n  state = {  }\n  formatAMPM = (lastSeen) =>\n    { // var months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n    var days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n       var temp_now = new Date();\n     //  let month= months[lastSeen.getMonth()];\n       let day = lastSeen.getDate();\n       let weekDay = days[lastSeen.getDay()]\n       let year = lastSeen.getFullYear().toString().slice(-2);\n       let month =lastSeen.getMonth()+1;\n       \n       if(temp_now.getFullYear()!==lastSeen.getFullYear()||temp_now.getMonth()!==lastSeen.getMonth())\n        {\n              \n               return day+\"/\"+month+\"/\"+year\n        }\n        if(temp_now.getMonth()===lastSeen.getMonth())\n        {\n            if((temp_now.getDate() - day) === 0)\n              {\n                var hours = lastSeen.getHours();\n                var minutes = lastSeen.getMinutes();\n                var ampm = hours >= 12 ? 'PM' : 'AM';\n                hours = hours % 12;\n                hours = hours ? hours : 12; // the hour '0' should be '12'\n                minutes = minutes < 10 ? '0'+minutes : minutes;\n                var strTime = hours + ':' + minutes + ' ' + ampm;\n                return strTime;\n              }\n              else if((temp_now.getDate() - day) === 1)\n              {\n                return \"Yesterday\"\n              }\n              else if((temp_now.getDate() - day) > 7)\n              {\n                return weekDay;\n              }\n              else{\n                return day+\"/\"+month+\"/\"+year\n              }\n        }\n     \n    }\n  unseenMsg = (newmsg) =>{\n    var cnt = 0;\n    newmsg.messages.map(m =>{\n      if(!m.seen && m.senderId === newmsg.Id)\n      {\n        cnt=cnt+1;\n      }\n      return 0;\n    })\n    if(cnt)\n    {\n      return <div className='unseen-msg'><p className=\"center-cnt\">{cnt}</p></div>\n    }\n\n  }\n  unseenMsgForRoom = (newmsg) =>{\n    var cnt = 0;\n \n    newmsg.messages.map(m =>{\n      if(!m.seen && m.senderId === newmsg.Id)\n      { \n        cnt=cnt+1;\n      }\n      return 0;\n    })\n   \n      return cnt;\n \n\n  }\n  openChat = (user) =>\n { const {currentUserUpdate,messages} = this.context\n   \n    let em = parseFloat( getComputedStyle( document.querySelector('body'))['font-size'])\n    let width = window.innerWidth / em\n    let height = window.innerHeight/ em\n   \n \n    if(width<60||height<41)\n    { \n\n    \n      \n     document.querySelector(\".middleHome\").style.display=\"flex\";\n     document.querySelector(\".leftHome\").style.display=\"none\"; \n      \n    \n    \n      \n    }\n\n    if(width>60&&width<90)\n    {\n          const middle = document.querySelector(\".middleHome\").style.display;\n          if(middle===\"none\")\n          {\n           document.querySelector(\".middleHome\").style.display=\"flex\";\n           document.querySelector(\".rightHome\").style.display='none';\n \n          }\n \n    }\n  \n\n  \n \n  for(let i=0;i<messages.length;i++)\n  {\n    if(user.id===messages[i].Id)\n    {\n      let chat = messages[i];\n     \n      currentUserUpdate({_id:chat.Id,username:chat.username,path:chat.path,isOnline:chat.isOnline,status:chat.status,lastSeen:chat.lastSeen})\n      break;\n    }\n    \n  }\n  \n     \n  }\n  status = (msg) =>\n  {  \n      if(msg.seen)\n        return (<div className=\"status-brief\"><div className=\"check\"></div>\n        <div className=\"check\"></div><p>{msg.msgBody}</p> </div>)\n     else if(msg.delivered)\n      return (<div className=\"status-brief\"><div className=\"check-sent\"></div>\n      <div className=\"check-sent\"></div> <p>{msg.msgBody}</p></div>)\n      else if(msg.sent)\n      return(<div className=\"status-brief\"><div className=\"check-sent\"></div><p>{msg.msgBody}</p></div>)\n      else\n           return (<div className=\"status-brief\">\n           <div id=\"loading5\">\n               <span id=\"outerCircle\"></span>\n               \n           </div>\n           <p>{msg.msgBody}</p>\n           </div>)\n  }\n  lastMessage = (newmsg) =>\n  { \n     \n    if(newmsg.Id===newmsg.messages[newmsg.messages.length-1].senderId)\n     return newmsg.messages[newmsg.messages.length-1].msgBody\n    else\n  return <div>{this.status(newmsg.messages[newmsg.messages.length-1])} </div>\n  }\n  \n  render() { \n   \n    const {updateSearch,updatecnt,onlineBottomUpdate,updatecntifup} = this.context\n    return ( \n      <div className='left-c '>\n      <ul className=\"img-ul\">\n    {this.props.messages.map( (newmsg) =>{ \n      \n    return (\n    \n    <li className='img-li ' key={newmsg.Id} onClick={e => {\n      this.openChat({id:newmsg.Id})\n      updatecnt(this.unseenMsgForRoom(newmsg));\n   onlineBottomUpdate(true);\n   updatecntifup();\n  \n          updateSearch()\n\n    \n                                                                }}>\n   \n      {newmsg.isOnline?<div className=\"img-chat\"> <img className=\"left-img\"   alt=\"#\" src={newmsg.path} /><div className=\"online-color\"></div></div>:<div className=\"img-chat\"><img className=\"left-img\"  alt=\"#\" src={newmsg.path} /></div>}\n  \n    <div className='img-div '>\n<h6 className=\"img-h\">{newmsg.username} </h6>\n      \n  {newmsg.isTyping?<div className=\"typing\">Typing ....</div>:<div className=\"img-p\">  {this.lastMessage(newmsg)}</div>} \n    </div>\n    <div>\n    {newmsg.isTyping?<span></span>:<span className='time'>{this.formatAMPM(new Date(newmsg.messages[newmsg.messages.length-1].sentTime))}</span>}\n{this.unseenMsg(newmsg)}\n     </div>\n        \n    </li>\n \n    )\n   \n    })}\n     </ul>\n    {this.props.messages.length?<div className=\"dot-end\"></div>:<span></span>}\n    </div>\n     \n );\n\n }\n}\n \nexport default ChatBrief;"]},"metadata":{},"sourceType":"module"}